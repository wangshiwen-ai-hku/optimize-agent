# Math Agent - æ•°å­¦å¯¼å¸ˆä¸ä¼˜åŒ–æ±‚è§£å™¨

ä¸€ä¸ªåŸºäº LangGraph å’Œ Gemini çš„æ™ºèƒ½æ•°å­¦åŠ©æ‰‹ï¼Œæ”¯æŒä¸¤ç§æ ¸å¿ƒæ¨¡å¼ï¼š

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### 1. Tutor æ¨¡å¼ - æ™ºèƒ½æ•°å­¦å¯¼å¸ˆ
- åŸºäºæä¾›çš„å­¦ä¹ ææ–™ï¼ˆæ–‡æœ¬ã€PDFã€å›¾ç‰‡ç­‰ï¼‰è¿›è¡Œé—®ç­”
- **æ™ºèƒ½æ£€ç´¢**ï¼šæ”¯æŒå…³é”®è¯æœç´¢å’Œè¯­ä¹‰æœç´¢
- **PDF å¤„ç†**ï¼šè‡ªåŠ¨åˆ†å—å’Œç´¢å¼•ï¼Œæ”¯æŒå¤§å‹ PDF æ–‡æ¡£
- **å·¥å…·è°ƒç”¨**ï¼šAgent è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„æ£€ç´¢å·¥å…·æŸ¥æ‰¾ä¿¡æ¯
- **è¿ç»­å·¥ä½œæ¨¡å¼** â­ï¼šè‡ªåŠ¨è°ƒç”¨å¤šä¸ªå·¥å…·ç›´åˆ°å®Œæ•´å›ç­”é—®é¢˜ï¼Œæ— éœ€ç”¨æˆ·ä¸­æ–­
- **ä¸“ä¸šå¼•ç”¨** â­ï¼šä½¿ç”¨ "ç¬¬ X é¡µ" è€Œä¸æ˜¯æŠ€æœ¯æ€§æ ‡è¯†ï¼Œæ˜“äºè¯»è€…ç†è§£
- æ”¯æŒäº¤äº’å¼æ¢ç´¢å’Œæ·±åº¦å­¦ä¹ 
- æä¾›æ¸…æ™°çš„æ­¥éª¤è§£é‡Šå’Œç¤ºä¾‹
- å¼•ç”¨ææ–™ä¸­çš„ç›¸å…³å†…å®¹

### 2. Solver æ¨¡å¼ - è‡ªåŠ¨ä¼˜åŒ–æ±‚è§£å™¨
- è‡ªåŠ¨è¯†åˆ«ä¼˜åŒ–é—®é¢˜ç±»å‹ï¼ˆLPã€IPã€NLP ç­‰ï¼‰
- ç”Ÿæˆæ•°å­¦æ¨¡å‹å’Œ Python æ±‚è§£ä»£ç 
- è‡ªåŠ¨æ‰§è¡Œä»£ç å¹¶è¿”å›ç»“æœ
- æ”¯æŒä»£ç é”™è¯¯è‡ªåŠ¨ä¿®å¤ï¼ˆæœ€å¤š 3 æ¬¡åæ€ï¼‰

## ğŸš€ å¿«é€Ÿå¼€å§‹

> ğŸ’¡ **æ–°æ‰‹ï¼Ÿ** æŸ¥çœ‹ [å¿«é€Ÿå¼€å§‹æŒ‡å—](QUICKSTART.md) 5 åˆ†é’Ÿä¸Šæ‰‹ï¼

### å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

æˆ–æ‰‹åŠ¨å®‰è£…ï¼š
```bash
pip install langgraph langchain google-generativeai scipy cvxpy pulp python-dotenv pillow PyPDF2 numpy pydantic pyyaml
```

### é…ç½®ç¯å¢ƒå˜é‡

åˆ›å»º `.env` æ–‡ä»¶ï¼š

```bash
GOOGLE_API_KEY=your_gemini_api_key
GOOGLE_PROVIDER=google_genai
```

### æµ‹è¯•å®‰è£…

```bash
# è¿è¡Œæ¼”ç¤ºï¼ˆæ¨èï¼‰
python demo.py

# æµ‹è¯• PDF å·¥å…·ï¼ˆä¸éœ€è¦ API keyï¼‰
python test_pdf_tools.py

# æµ‹è¯•å®Œæ•´åŠŸèƒ½ï¼ˆéœ€è¦ API keyï¼‰
python test_agent.py
```

### ä½¿ç”¨æ–¹å¼

#### 1. Tutor æ¨¡å¼ - äº¤äº’å¼å­¦ä¹ 

æ”¯æŒæ–‡æœ¬å’Œ PDF ææ–™ï¼š

```bash
# ä½¿ç”¨æ–‡æœ¬ææ–™
python -m src.agent.main tutor examples/materials/linear_programming.txt

# ä½¿ç”¨ PDF ææ–™
python -m src.agent.main tutor examples/materials/optimization_guide.pdf
```

Tutor ä¼šè‡ªåŠ¨ï¼š
1. åŠ è½½å¹¶åˆ†å—å¤„ç†ææ–™
2. æ ¹æ®é—®é¢˜é€‰æ‹©åˆé€‚çš„æ£€ç´¢å·¥å…·ï¼ˆå…³é”®è¯æœç´¢æˆ–è¯­ä¹‰æœç´¢ï¼‰
3. æŸ¥æ‰¾ç›¸å…³å†…å®¹
4. åŸºäºæ£€ç´¢ç»“æœç”Ÿæˆå›ç­”

ç„¶åå¯ä»¥æé—®ï¼š
- "ä»€ä¹ˆæ˜¯çº¿æ€§è§„åˆ’ï¼Ÿ"
- "å•çº¯å½¢æ³•çš„åŸºæœ¬æ€æƒ³æ˜¯ä»€ä¹ˆï¼Ÿ"
- "å¦‚ä½•ç”¨ Python æ±‚è§£çº¿æ€§è§„åˆ’é—®é¢˜ï¼Ÿ"
- "ç¬¬äºŒç« è®²äº†ä»€ä¹ˆå†…å®¹ï¼Ÿ"ï¼ˆé’ˆå¯¹ PDFï¼‰

#### 2. Solver æ¨¡å¼ - è‡ªåŠ¨æ±‚è§£

```bash
python -m src.agent.main solver
```

ç„¶åè¾“å…¥ä¼˜åŒ–é—®é¢˜ï¼Œä¾‹å¦‚ï¼š
```
ä¸€ä¸ªå·¥å‚ç”Ÿäº§ä¸¤ç§äº§å“ A å’Œ Bã€‚
äº§å“ A æ¯ä»¶åˆ©æ¶¦ 40 å…ƒï¼Œéœ€è¦ 2 å°æ—¶åŠ å·¥ï¼Œ3 å°æ—¶è£…é…
äº§å“ B æ¯ä»¶åˆ©æ¶¦ 30 å…ƒï¼Œéœ€è¦ 1 å°æ—¶åŠ å·¥ï¼Œ2 å°æ—¶è£…é…
æ¯å¤©æœ‰ 100 å°æ—¶åŠ å·¥æ—¶é—´ï¼Œ120 å°æ—¶è£…é…æ—¶é—´
æ±‚å¦‚ä½•å®‰æ’ç”Ÿäº§ä½¿åˆ©æ¶¦æœ€å¤§ï¼Ÿ
```

#### 3. ç¼–ç¨‹æ–¹å¼ä½¿ç”¨

```python
import asyncio
from src.agent.main import run_tutor, run_solver

# Tutor æ¨¡å¼
async def tutor_example():
    answer = await run_tutor(
        question="ä»€ä¹ˆæ˜¯çº¿æ€§è§„åˆ’ï¼Ÿ",
        materials=["examples/materials/linear_programming.txt"]
    )
    print(answer)

# Solver æ¨¡å¼
async def solver_example():
    result = await run_solver(
        problem="æœ€å°åŒ– (x-2)^2 + (y-3)^2ï¼Œçº¦æŸ x+y<=5, x>=0, y>=0"
    )
    print(result["solution"])
    print(result["code"])

asyncio.run(tutor_example())
asyncio.run(solver_example())
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ agent/
â”‚   â”‚   â”œâ”€â”€ config.yaml      # Agent é…ç½®
â”‚   â”‚   â”œâ”€â”€ schema.py        # çŠ¶æ€å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ graph.py         # LangGraph å·¥ä½œæµ
â”‚   â”‚   â””â”€â”€ main.py          # ä¸»å…¥å£
â”‚   â”œâ”€â”€ config/              # é…ç½®ç®¡ç†
â”‚   â””â”€â”€ utils/               # å·¥å…·å‡½æ•°
â”œâ”€â”€ examples/
â”‚   â”œâ”€â”€ tutor_example.py     # Tutor ç¤ºä¾‹
â”‚   â”œâ”€â”€ solver_example.py    # Solver ç¤ºä¾‹
â”‚   â””â”€â”€ materials/           # å­¦ä¹ ææ–™
â””â”€â”€ README.md
```

## ğŸ”§ æ”¯æŒçš„ä¼˜åŒ–é—®é¢˜ç±»å‹

- **çº¿æ€§è§„åˆ’ (LP)**ï¼šç›®æ ‡å‡½æ•°å’Œçº¦æŸéƒ½æ˜¯çº¿æ€§çš„
- **æ•´æ•°è§„åˆ’ (IP/MIP)**ï¼šéƒ¨åˆ†æˆ–å…¨éƒ¨å˜é‡è¦æ±‚ä¸ºæ•´æ•°
- **éçº¿æ€§è§„åˆ’ (NLP)**ï¼šç›®æ ‡å‡½æ•°æˆ–çº¦æŸåŒ…å«éçº¿æ€§é¡¹
- **å‡¸ä¼˜åŒ–**ï¼šç›®æ ‡å‡½æ•°ä¸ºå‡¸å‡½æ•°çš„ä¼˜åŒ–é—®é¢˜
- **çº¦æŸæ»¡è¶³é—®é¢˜ (CSP)**ï¼šå¯»æ‰¾æ»¡è¶³æ‰€æœ‰çº¦æŸçš„è§£

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **LangGraph**ï¼šå·¥ä½œæµç¼–æ’
- **Gemini 2.5 Flash**ï¼šå¤§è¯­è¨€æ¨¡å‹
- **SciPy/CVXPY/PuLP**ï¼šä¼˜åŒ–æ±‚è§£åº“
- **Python 3.10+**

## ğŸ“ ç¤ºä¾‹

æŸ¥çœ‹ `examples/` ç›®å½•è·å–æ›´å¤šç¤ºä¾‹ï¼š
- `tutor_example.py`ï¼šTutor æ¨¡å¼ä½¿ç”¨ç¤ºä¾‹
- `solver_example.py`ï¼šSolver æ¨¡å¼ä½¿ç”¨ç¤ºä¾‹
- `test_pdf_tutor.py`ï¼šPDF æ£€ç´¢æµ‹è¯•
- `create_sample_pdf.py`ï¼šåˆ›å»ºç¤ºä¾‹ PDF
- `materials/`ï¼šç¤ºä¾‹å­¦ä¹ ææ–™

## ğŸ“š æ–‡æ¡£

- [å¿«é€Ÿå¼€å§‹æŒ‡å—](QUICKSTART.md) - 5 åˆ†é’Ÿä¸Šæ‰‹
- [Tutor ä½¿ç”¨æŒ‡å—](docs/TUTOR_GUIDE.md) - è¯¦ç»†ä½¿ç”¨è¯´æ˜
- [PDF æ£€ç´¢è®¾è®¡](docs/PDF_RETRIEVAL.md) - æ¶æ„å’Œå®ç°ç»†èŠ‚
- [è¿ç»­å·¥ä½œæ¨¡å¼](docs/CONTINUOUS_MODE.md) - è‡ªåŠ¨åŒ–å·¥ä½œæµç¨‹ â­
- [å¼•ç”¨æ ¼å¼æŒ‡å—](docs/CITATION_GUIDE.md) - ä¸“ä¸šå¼•ç”¨è§„èŒƒ â­

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ License

MIT